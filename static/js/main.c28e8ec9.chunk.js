(this.webpackJsonpcook_book_client_web=this.webpackJsonpcook_book_client_web||[]).push([[0],{66:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},72:function(e,t,a){e.exports=a(87)},77:function(e,t,a){},84:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(25),i=a.n(r),o=(a(77),a(71)),c=a(98),l=a(97),u=a(23),p=a(11),m=a(9),h=a.n(m),g={SaveToken:function(e,t){t?h.a.set("JWT",e,{expires:7}):h.a.set("JWT",e)},LoadToken:function(){return h.a.get("JWT")?h.a.get("JWT"):null},LogOut:function(){h.a.remove("JWT"),h.a.remove("userName"),h.a.remove("email"),h.a.remove("id")},isAuthenticated:function(){return!!h.a.get("JWT")},SaveUserData:function(e){h.a.set("userName",e.userName,{expires:7}),h.a.set("email",e.email,{expires:7}),h.a.set("id",e.id,{expires:7}),h.a.set("favouriteRecipes",e.favouriteRecipes,{expires:7})},LoadUserEmail:function(){return h.a.get("email")?h.a.get("email"):null},LoadUserId:function(){return h.a.get("id")?h.a.get("id"):null},LoadUserName:function(){return h.a.get("userName")?h.a.get("userName"):null},LoadUserFavouritesRecipes:function(){return h.a.get("favouriteRecipes")?h.a.get("favouriteRecipes"):null},SaveFavouritesRecipes:function(e){h.a.set("favouriteRecipes",e,{expires:7})}};var d=function(){return s.a.createElement("header",null,s.a.createElement(l.a,{variant:"dark",bg:"primary",sticky:"top",expand:"lg"},s.a.createElement(l.a.Brand,{as:p.b,to:"/UserRecipes"},"  ",s.a.createElement("img",{alt:"",src:"cook_book_client_web/blankicon256.png",width:"30",height:"30",className:"d-inline-block align-top"})," "," Cook Book"),s.a.createElement(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),s.a.createElement(l.a.Collapse,{id:"basic-navbar-nav"},null!=g.LoadUserName()&&g.isAuthenticated()?s.a.createElement(c.a,{className:"mr-auto"},s.a.createElement(c.a.Link,{as:p.b,to:"/Edit/0"},"Dodaj przepis"),s.a.createElement(c.a.Link,{as:p.b,to:"/UserRecipes"},"Moje przepisy"),s.a.createElement(c.a.Link,{as:p.b,to:"/PublicRecipes"},"Odkrywaj przepisy"),s.a.createElement(c.a.Link,{as:p.b,to:"/FavouritesRecipes"},"Ulubione przepisy")):null,s.a.createElement(c.a,{className:"justify-content-end"},s.a.createElement(c.a.Link,{className:"mr-3",as:p.b,to:"/About"},"O aplikacji"),null!=g.LoadUserName()&&g.isAuthenticated()?s.a.createElement(l.a.Text,{className:"AboutUser"},"Witaj ",g.LoadUserName()+"!"):null,function(){var e=Object(u.g)();return g.isAuthenticated()?s.a.createElement(c.a.Link,{onClick:function(){g.LogOut((function(){return e.push("/")}))},as:p.b,to:"/Login"},"Wyloguj"):s.a.createElement(c.a.Link,{as:p.b,to:"/Login"},"Zaloguj si\u0119")}()))))},f=a(28),b=a(19),v=a(20),P=a(7),S=a(21),E=a(22),y=a(90),I=a(91),k=a(96),O=a(92),R=a(5),w=a.n(R),N=a(8),j={GetBearer:function(){return"bearer "+g.LoadToken()}};var x={Register:function(e,t,a,n){return C.apply(this,arguments)},LogIn:function(e,t){return z.apply(this,arguments)},GetUserData:function(){return U.apply(this,arguments)},EditUser:function(e){return L.apply(this,arguments)}},D="https://cookbookapi.azurewebsites.net";function C(){return(C=Object(N.a)(w.a.mark((function e(t,a,n,s){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:t,UserName:a,Password:n,ConfirmPassword:s})},e.next=3,fetch(D+"/api/Account/register",r).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(N.a)(w.a.mark((function e(t,a){var n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("grant_type","password"),n.append("username",t),n.append("password",a),s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n},e.next=7,fetch(D+"/token",s).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(N.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.GetBearer(),a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t}},e.next=4,fetch(D+"/api/User",a).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(N.a)(w.a.mark((function e(t){var a,n,s,r,i,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.GetBearer(),n=g.LoadUserId(),s=g.LoadUserName(),r=g.LoadUserEmail(),(i=new FormData).append("Id",n),i.append("UserName",s),i.append("Email",r),i.append("FavouriteRecipes",t),o={method:"PUT",headers:{Authorization:a},body:i},e.next=12,fetch(D+"/api/User/".concat(n),o).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).handleCheckboxChange=function(t){return e.setState({RememberMe:t.target.checked})},e.state={Login:"",Password:"",RememberMe:!1,InfoMessage:"",DuringOperation:!1,isLogged:!1},e.handleChange=e.handleChange.bind(Object(P.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(P.a)(e)),e.handleCheckboxChange=e.handleCheckboxChange.bind(Object(P.a)(e)),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){g.isAuthenticated()&&this.setState({isLogged:!0})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(f.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;this.setState({DuringOperation:!0}),x.LogIn(this.state.Login,this.state.Password).then((function(e){console.log("Zalogowano"),t.setState({InfoMessage:""}),t.setState({DuringOperation:!1}),g.SaveToken(e.access_Token,t.state.RememberMe),t.GetUserData()})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({InfoMessage:a.message}),t.setState({DuringOperation:!1})}catch(e){console.log(e)}})),e.preventDefault()}},{key:"GetUserData",value:function(){var e=this;x.GetUserData().then((function(t){console.log("Pobrano dane u\u017cytkownika"),g.SaveUserData(t),e.setState({isLogged:!0})})).catch((function(t){if("TypeError: response.text is not a function"==t)console.log("Problem z po\u0142\u0105czeniem"),e.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),e.setState({DuringOperation:!1});else try{var a=JSON.parse(t);console.log(a.message),e.setState({InfoMessage:a.message}),e.setState({DuringOperation:!1})}catch(t){console.log(t)}}))}},{key:"LoginMessage",value:function(){return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(y.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):""!=this.state.InfoMessage?s.a.createElement(I.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage):null}},{key:"render",value:function(){return!0===this.state.isLogged?s.a.createElement(u.a,{to:"/UserRecipes"}):s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col"},s.a.createElement(k.a,{onSubmit:this.handleSubmit},s.a.createElement("h1",{className:"display-3 text-center mt-5"},"Logowanie"),this.LoginMessage(),s.a.createElement(k.a.Group,{controlId:"formLogin"},s.a.createElement(k.a.Label,null,"Login"),s.a.createElement(k.a.Control,{type:"text",required:!0,placeholder:"Enter login",name:"Login",onChange:this.handleChange,value:this.state.Login})),s.a.createElement(k.a.Group,{controlId:"formPassword"},s.a.createElement(k.a.Label,null,"Has\u0142o"),s.a.createElement(k.a.Control,{type:"password",required:!0,placeholder:"Password",name:"Password",onChange:this.handleChange,value:this.state.Password})),s.a.createElement(k.a.Group,{controlId:"formRemember"},s.a.createElement(k.a.Check,{type:"checkbox",label:"Zapami\u0119taj",name:"RememberMe",onChange:this.handleCheckboxChange,checked:this.state.RememberMe})),s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(O.a,{variant:"primary",type:"submit"},"Zaloguj"))))),s.a.createElement("h1",{className:"lead text-center mt-3"},"Nie masz jeszcze konta? Zarejestruj si\u0119!"),s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(O.a,{variant:"outline-primary",as:p.b,to:"/Register"},"Zarejestruj")))}}]),a}(n.Component);a(66),a(84);var M=a(53),T={GetAllRecipesLoggedUser:function(e,t){return G.apply(this,arguments)},DownloadImage:function(e){return W.apply(this,arguments)},DeleteRecipes:function(e){return q.apply(this,arguments)},InsertRecipe:function(e,t,a,n,s){return H.apply(this,arguments)},GetRecipeByID:function(e){return B.apply(this,arguments)},PutRecipes:function(e,t,a,n,s,r,i,o){return Z.apply(this,arguments)},GetPublicRecipes:function(e,t){return _.apply(this,arguments)},GetFavouritesRecipes:function(e,t){return J.apply(this,arguments)}},A="https://cookbookapi.azurewebsites.net";function B(){return(B=Object(N.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.GetBearer(),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a}},e.next=4,fetch(A+"/api/Recipes/".concat(t),n).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(N.a)(w.a.mark((function e(t,a){var n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.GetBearer(),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:n}},e.next=4,fetch(A+"/api/Recipes/CurrentUserRecipes/".concat(t,"/").concat(a),s).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(N.a)(w.a.mark((function e(t,a){var n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.GetBearer(),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:n}},e.next=4,fetch(A+"/api/Recipes/GetPublicRecipes/".concat(t,"/").concat(a),s).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(N.a)(w.a.mark((function e(t,a){var n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.GetBearer(),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:n}},e.next=4,fetch(A+"/api/Recipes/GetFavouritesRecipes/".concat(t,"/").concat(a),s).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(N.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.GetBearer(),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a}},e.next=4,fetch(A+"/api/Recipes/GetPhoto/".concat(t),n).then((function(e){return e.ok?e.blob():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(N.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.GetBearer(),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:a}},e.next=4,fetch(A+"/api/Recipes/".concat(t),n).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(N.a)(w.a.mark((function e(t,a,n,s,r){var i,o,c,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j.GetBearer(),o=n.join(";"),(c=new FormData).append("Name",t),c.append("Instruction",a),c.append("Ingredients",o),c.append("Image",s),c.append("isPublic",r),l={method:"POST",headers:{Authorization:i},body:c},e.next=11,fetch(A+"/api/Recipes/",l).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(N.a)(w.a.mark((function e(t,a,n,s,r,i,o,c){var l,u,p,m;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=j.GetBearer(),u=r.join(";"),(p=new FormData).append("Name",n),p.append("Instruction",s),p.append("Ingredients",u),p.append("Image",i),p.append("NameOfImage",o),p.append("RecipeId",a),p.append("isPublic",c),m={method:"PUT",headers:{Authorization:l},body:p},e.next=13,fetch(A+"/api/Recipes/".concat(t),m).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=a(65),$=a(93),K=a(94),Q=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={DuringOperation:!1,UserOrPublicOrFavourites:"User",InfoMessage:"",Recipes:[],CanNext:!1,CanPrevious:!1,PageSize:15,TotalPages:1,PageNumberUserRecipes:1,PageNumberPublicRecipes:1,PageNumberFavouritesRecipes:1},n.PreviousPage=n.PreviousPage.bind(Object(P.a)(n)),n.NextPage=n.NextPage.bind(Object(P.a)(n)),n}return Object(v.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.CheckPath()}},{key:"componentDidMount",value:function(){this.CheckPath()}},{key:"AddDisplayAsPublicProperty",value:function(e){var t=window.location.hash;e.forEach((function(e){e.DisplayAsPublic=!1,!e.isPublic||e.userName!==g.LoadUserName()||"#/PublicRecipes"!==t&&"#/UserRecipes"!==t&&"#/"!==t&&"/"!==t?e.DisplayAsPublic=!1:e.DisplayAsPublic=!0}))}},{key:"AddDisplayAsFavouritesProperty",value:function(e){var t=window.location.hash,a=g.LoadUserFavouritesRecipes();e.forEach((function(e){e.DisplayAsFavourite=!1,"#/PublicRecipes"===t&&a.includes(e.recipeId)?e.DisplayAsFavourite=!0:e.DisplayAsFavourites=!1}))}},{key:"CheckPath",value:function(){try{var e=window.location.hash,t=this.props.location.pageBackUser,a=this.props.location.pageBackPublic,n=this.props.location.pageBackFavourites;if(void 0!=t&&this.setState({PageNumberUserRecipes:t}),void 0!=a&&this.setState({PageNumberPublicRecipes:a}),void 0!=n&&this.setState({PageNumberFavouritesRecipes:n}),"#/PublicRecipes"===e){var s=this.props.location.pageBackPublic;void 0===s&&(s=this.state.PageNumberPublicRecipes),this.setState({PageNumberPublicRecipes:s}),this.setState({UserOrPublicOrFavourites:"Public"}),this.LoadPublicRecipes(this.state.PageSize,s)}else if("#/UserRecipes"===e){var r=this.props.location.pageBackUser;void 0===r&&(r=this.state.PageNumberUserRecipes),this.setState({PageNumberUserRecipes:r}),this.setState({UserOrPublicOrFavourites:"User"}),this.LoadUserRecipes(this.state.PageSize,r)}else if("#/FavouritesRecipes"===e){var i=this.props.location.pageBackFavourites;void 0===i&&(i=this.state.PageNumberFavouritesRecipes),this.setState({PageNumberFavouritesRecipes:i}),this.setState({UserOrPublicOrFavourites:"Favourites"}),this.LoadFavouritesRecipes(this.state.PageSize,i)}else this.setState({UserOrPublicOrFavourites:"User"}),this.LoadUserRecipes(this.state.PageSize,this.state.PageNumberUserRecipes)}catch(o){this.setState({UserOrPublicOrFavourites:"User"}),this.LoadUserRecipes(this.state.PageSize,this.state.PageNumberUserRecipes)}}},{key:"LoadUserRecipes",value:function(e,t){var a=this;this.setState({DuringOperation:!0}),T.GetAllRecipesLoggedUser(e,t).then((function(e){console.log("Pobrano dane u\u017cytkownika"),a.AddDisplayAsPublicProperty(e),a.setState({Recipes:e}),a.setState({DuringOperation:!1}),e.length>0?a.setState({TotalPages:e[0].totalPages}):a.setState({TotalPages:1}),a.NavigationButtonsActiveDeactive(t),a.DonwloadRecipeImage()})).catch((function(e){if("TypeError: response.text is not a function"==e)a.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),console.log("Problem z po\u0142\u0105czeniem"),a.setState({DuringOperation:!1});else try{var t=JSON.parse(e);console.log(t.message),a.setState({InfoMessage:t.message}),a.setState({DuringOperation:!1})}catch(e){console.log(e),a.setState({DuringOperation:!1})}}))}},{key:"LoadPublicRecipes",value:function(e,t){var a=this;this.setState({DuringOperation:!0}),this.LoadUserData(),T.GetPublicRecipes(e,t).then((function(e){console.log("Pobrano dane u\u017cytkownika"),a.AddDisplayAsPublicProperty(e),a.AddDisplayAsFavouritesProperty(e),a.setState({Recipes:e}),a.setState({DuringOperation:!1}),e.length>0?a.setState({TotalPages:e[0].totalPages}):a.setState({TotalPages:1}),a.NavigationButtonsActiveDeactive(t),a.DonwloadRecipeImage()})).catch((function(e){if("TypeError: response.text is not a function"==e)a.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),console.log("Problem z po\u0142\u0105czeniem"),a.setState({DuringOperation:!1});else try{var t=JSON.parse(e);console.log(t.message),a.setState({InfoMessage:t.message}),a.setState({DuringOperation:!1})}catch(e){console.log(e),a.setState({DuringOperation:!1})}}))}},{key:"LoadFavouritesRecipes",value:function(e,t){var a=this;this.setState({DuringOperation:!0}),T.GetFavouritesRecipes(e,t).then((function(e){console.log("Pobrano dane u\u017cytkownika"),a.setState({Recipes:e}),a.setState({DuringOperation:!1}),e.length>0?a.setState({TotalPages:e[0].totalPages}):a.setState({TotalPages:1}),a.NavigationButtonsActiveDeactive(t),a.DonwloadRecipeImage()})).catch((function(e){if("TypeError: response.text is not a function"==e)a.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),console.log("Problem z po\u0142\u0105czeniem"),a.setState({DuringOperation:!1});else try{var t=JSON.parse(e);console.log(t.message),a.setState({InfoMessage:t.message}),a.setState({DuringOperation:!1})}catch(e){console.log(e),a.setState({DuringOperation:!1})}}))}},{key:"LoadUserData",value:function(){var e=this;x.GetUserData().then((function(t){console.log("Pobrano dane u\u017cytkownika"),g.SaveUserData(t),e.setState({isLogged:!0})})).catch((function(t){if("TypeError: response.text is not a function"==t)console.log("Problem z po\u0142\u0105czeniem"),e.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),e.setState({DuringOperation:!1});else try{var a=JSON.parse(t);console.log(a.message),e.setState({InfoMessage:a.message}),e.setState({DuringOperation:!1})}catch(t){console.log(t)}}))}},{key:"DonwloadRecipeImage",value:function(){var e,t=this;this.state.Recipes.forEach((function(a,n){null===a.nameOfImage?(a.image="cook_book_client_web/food template.png",t.setState({Recipes:t.state.Recipes.map((function(e){return e.recipeId===a.recipeId?Object(M.a)({},e,{item:a}):e}))})):T.DownloadImage(a.nameOfImage).then((function(n){e=URL.createObjectURL(n),a.image=e,t.setState({Recipes:t.state.Recipes.map((function(e){return e.recipeId===a.recipeId?Object(M.a)({},e,{item:a}):e}))}),t.setState({DuringOperation:!1})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({DuringOperation:!1})}catch(e){console.log(e),t.setState({DuringOperation:!1})}}))}))}},{key:"PreviousPage",value:function(){if("User"===this.state.UserOrPublicOrFavourites){var e=this.state.PageNumberUserRecipes;this.setState((function(e){return{PageNumberUserRecipes:e.PageNumberUserRecipes-1}})),this.LoadUserRecipes(this.state.PageSize,e-1)}else if("Public"===this.state.UserOrPublicOrFavourites){var t=this.state.PageNumberPublicRecipes;this.setState((function(e){return{PageNumberPublicRecipes:e.PageNumberPublicRecipes-1}})),this.LoadPublicRecipes(this.state.PageSize,t-1)}else if("Favourites"===this.state.UserOrPublicOrFavourites){var a=this.state.PageNumberFavouritesRecipes;this.setState((function(e){return{PageNumberFavouritesRecipes:e.PageNumberFavouritesRecipes-1}})),this.LoadFavouritesRecipes(this.state.PageSize,a-1)}}},{key:"NextPage",value:function(){if("User"===this.state.UserOrPublicOrFavourites){var e=this.state.PageNumberUserRecipes;this.setState((function(e){return{PageNumberUserRecipes:e.PageNumberUserRecipes+1}})),this.LoadUserRecipes(this.state.PageSize,e+1)}else if("Public"===this.state.UserOrPublicOrFavourites){var t=this.state.PageNumberPublicRecipes;this.setState((function(e){return{PageNumberPublicRecipes:e.PageNumberPublicRecipes+1}})),this.LoadPublicRecipes(this.state.PageSize,t+1)}else if("Favourites"===this.state.UserOrPublicOrFavourites){var a=this.state.PageNumberFavouritesRecipes;this.setState((function(e){return{PageNumberFavouritesRecipes:e.PageNumberFavouritesRecipes+1}})),this.LoadFavouritesRecipes(this.state.PageSize,a+1)}}},{key:"NavigationButtonsActiveDeactive",value:function(e){e<=1?this.setState({CanPrevious:!1}):this.setState({CanPrevious:!0}),e>=this.state.TotalPages?this.setState({CanNext:!1}):this.setState({CanNext:!0})}},{key:"render",value:function(){var e=this;if(this.state.DuringOperation)return s.a.createElement("div",{class:"d-flex justify-content-center Center"},s.a.createElement(y.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading...")));if(""!=this.state.InfoMessage)return s.a.createElement(I.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage);var t=this.state.Recipes.map((function(t){return s.a.createElement(V.a,{sm:4,md:3,lg:2,xl:2,as:p.b,to:{pathname:"/RecipePreview/".concat(t.recipeId),recipeProps:t,UserOrPublicOrFavouritesProps:e.state.UserOrPublicOrFavourites,pageBackUser:e.state.PageNumberUserRecipes,pageBackPublic:e.state.PageNumberPublicRecipes,pageBackFavourites:e.state.PageNumberFavouritesRecipes},className:t.DisplayAsPublic?"PublicRecipe":t.DisplayAsFavourite?"FavouriteRecipe":"NormalRecipe",key:t.recipeId},s.a.createElement("div",{className:"mt-3 singleRecipe"},s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement("img",{src:t.image})),s.a.createElement("p",{className:"text-center"}," ",t.name)))}));return s.a.createElement($.a,{fluid:!0},s.a.createElement(K.a,{className:"justify-content-center"},t,s.a.createElement(V.a,{md:12},s.a.createElement("div",{className:"d-flex justify-content-center mt-3"},s.a.createElement(O.a,{className:"mr-3",variant:"primary",size:"lg",disabled:!this.state.CanPrevious,onClick:this.PreviousPage}," <= "),s.a.createElement("p",{className:"mr-3 "},function(){switch(e.state.UserOrPublicOrFavourites){case"User":return"Strona "+e.state.PageNumberUserRecipes+" z "+e.state.TotalPages;case"Public":return"Strona "+e.state.PageNumberPublicRecipes+" z "+e.state.TotalPages;case"Favourites":return"Strona "+e.state.PageNumberFavouritesRecipes+" z "+e.state.TotalPages;default:return"Strona "+e.state.PageNumberUserRecipes+" z "+e.state.TotalPages}}()),s.a.createElement(O.a,{variant:"primary",size:"lg",disabled:!this.state.CanNext,onClick:this.NextPage}," => ")))))}}]),a}(n.Component),X=a(95),Y=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={Name:"",Instructions:"",Ingredients:[],Image:"",nameOfImage:"",ID:"",isPublic:!1,userName:"",showModal:!1,RecipeDeleted:!1,DuringOperation:!1,InfoMessage:"",LastVisit:"",PageBack:"1",IsFavourite:!1},n.handleModalClose=n.handleModalClose.bind(Object(P.a)(n)),n.handleModalShow=n.handleModalShow.bind(Object(P.a)(n)),n.handleRecipeDelete=n.handleRecipeDelete.bind(Object(P.a)(n)),n.handleFavouriteCLick=n.handleFavouriteCLick.bind(Object(P.a)(n)),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.id);try{this.setState({Name:this.props.location.recipeProps.item.name}),this.setState({Instructions:this.props.location.recipeProps.item.instruction}),this.setState({Ingredients:this.props.location.recipeProps.item.ingredients}),this.setState({Image:this.props.location.recipeProps.item.image}),this.setState({ID:this.props.location.recipeProps.item.recipeId}),this.setState({nameOfImage:this.props.location.recipeProps.item.nameOfImage}),this.setState({isPublic:this.props.location.recipeProps.item.isPublic}),this.setState({userName:this.props.location.recipeProps.item.userName}),this.setState({PageBackUser:this.props.location.pageBackUser}),this.setState({PageBackPublic:this.props.location.pageBackPublic}),this.setState({PageBackFavourites:this.props.location.pageBackFavourites}),g.LoadUserFavouritesRecipes().includes(this.props.location.recipeProps.item.recipeId)&&this.setState({IsFavourite:!0}),"User"===this.props.location.UserOrPublicOrFavouritesProps?this.setState({LastVisit:"/UserRecipes"}):"Public"===this.props.location.UserOrPublicOrFavouritesProps?this.setState({LastVisit:"/PublicRecipes"}):this.setState({LastVisit:"/FavouritesRecipes"})}catch(t){this.setState({DuringOperation:!0}),T.GetRecipeByID(this.props.match.params.id).then((function(t){console.log("Pobrano przepis "),e.setState({Name:t.name}),e.setState({Instructions:t.instruction}),e.setState({Ingredients:t.ingredients}),e.setState({nameOfImage:t.nameOfImage}),e.setState({ID:t.recipeId}),e.setState({isPublic:t.isPublic}),e.setState({userName:t.userName}),e.setState({LastVisit:"/UserRecipes"}),g.LoadUserFavouritesRecipes().includes(t.recipeId)&&e.setState({IsFavourite:!0}),e.setState({DuringOperation:!1}),e.DonwloadRecipeImage()})).catch((function(t){if("TypeError: response.text is not a function"==t)console.log("Problem z po\u0142\u0105czeniem"),e.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),e.setState({DuringOperation:!1});else try{var a=JSON.parse(t);console.log(a.message),e.setState({InfoMessage:a.message}),e.setState({DuringOperation:!1})}catch(t){console.log(t),e.setState({DuringOperation:!1})}}))}}},{key:"DonwloadRecipeImage",value:function(){var e,t=this;null===this.state.nameOfImage?this.setState({Image:"cook_book_client_web/food template.png"}):(this.setState({DuringOperation:!0}),T.DownloadImage(this.state.nameOfImage).then((function(a){console.log("Pobrano obrazek"),e=URL.createObjectURL(a),t.setState({Image:e}),t.setState({DuringOperation:!1})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({DuringOperation:!1})}catch(e){console.log(e),t.setState({DuringOperation:!1})}})))}},{key:"handleModalShow",value:function(e){this.setState({showModal:!0})}},{key:"handleModalClose",value:function(e){this.setState({showModal:!1})}},{key:"handleFavouriteCLick",value:function(e){var t=this,a=!1,n=g.LoadUserFavouritesRecipes(),s=JSON.parse(n);if(this.state.IsFavourite){a=!0;var r=s.indexOf(this.state.ID);r>-1&&s.splice(r,1)}else a=!1,s.push(this.state.ID);var i=s.join(";");x.EditUser(i).then((function(e){a?(console.log("Usuni\u0119to z ulubionych!"),t.setState({IsFavourite:!1})):(console.log("Dodano do ulubionych!"),t.setState({IsFavourite:!0})),g.SaveFavouritesRecipes(s)})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem");else try{var t=JSON.parse(e);console.log(t.message)}catch(e){console.log(e)}}))}},{key:"ModalDelete",value:function(e){return s.a.createElement(X.a,Object.assign({},e,{size:"lg",centered:!0}),s.a.createElement(X.a.Header,{closeButton:!0},s.a.createElement(X.a.Title,{id:"contained-modal-title-vcenter"},e.name)),s.a.createElement(X.a.Body,null,s.a.createElement("p",null,"Na pewno chcesz usun\u0105\u0107 ten przepis? Operacji nie mo\u017cna cofn\u0105\u0107!")),s.a.createElement(X.a.Footer,null,s.a.createElement(O.a,{variant:"danger",onClick:e.delete},"Usu\u0144"),s.a.createElement(O.a,{variant:"dark",onClick:e.onHide},"Cofnij")))}},{key:"handleRecipeDelete",value:function(e){var t=this;T.DeleteRecipes(this.state.ID).then((function(e){console.log("Usuni\u0119to!"),t.setState({RecipeDeleted:!0})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem");else try{var t=JSON.parse(e);console.log(t.message)}catch(e){console.log(e)}}))}},{key:"render",value:function(){if(!0===this.state.RecipeDeleted)return s.a.createElement(u.a,{to:"/Recipes"});var e,t,a,n;this.state.isPublic&&this.state.userName!==g.LoadUserName()?(e=null,t=null,a=s.a.createElement("p",{className:"text-center"},"Autor przepisu: ",this.state.userName),n=s.a.createElement(O.a,{onClick:this.handleFavouriteCLick,size:"lg",variant:"outline-warning",className:"mt-3 mb-3  mx-auto d-block"}," ",s.a.createElement("img",{className:"img-fluid imgStar",src:this.state.IsFavourite?"cook_book_client_web/starFull.png":"cook_book_client_web/starEmpty.png"})," ")):(e=s.a.createElement(O.a,{size:"lg",variant:"outline-dark",className:"mr-3 mt-3 mb-3 mx-auto d-block",as:p.b,to:{pathname:"/Edit/".concat(this.state.ID),recipeProps:this.state}},"Edytuj"),t=s.a.createElement(O.a,{onClick:this.handleModalShow,size:"lg",variant:"outline-danger",className:"mt-3 mb-3  mx-auto d-block"},"Usu\u0144"),a=null,n=null);var r=this.state.Ingredients.map((function(e){return s.a.createElement("li",null,e)}));return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center Center"},s.a.createElement(y.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):""!=this.state.InfoMessage?s.a.createElement(I.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage):s.a.createElement("div",null,s.a.createElement($.a,null,s.a.createElement(K.a,null,s.a.createElement(V.a,{md:12},s.a.createElement("h1",{className:"mt-3 mb-3 text-center"},this.state.Name)),s.a.createElement(V.a,{md:12},s.a.createElement("p",{className:"ml-2 mr-2"},this.state.Instructions)),s.a.createElement(V.a,{md:4,className:"align-self-center"},s.a.createElement("ul",null,r)),s.a.createElement(V.a,{md:8},s.a.createElement("img",{className:"img-fluid mx-auto d-block",src:this.state.Image})),s.a.createElement(V.a,null,s.a.createElement(O.a,{size:"lg",variant:"outline-dark",className:"mr-3 mt-3 mb-3 mx-auto d-block",as:p.b,to:{pathname:this.state.LastVisit,pageBackUser:this.state.PageBackUser,pageBackPublic:this.state.PageBackPublic,pageBackFavourites:this.state.PageBackFavourites}},"Powr\xf3t")),s.a.createElement(V.a,{className:"align-self-center"},e,a),s.a.createElement(V.a,null,t,n))),s.a.createElement(this.ModalDelete,{show:this.state.showModal,onHide:this.handleModalClose,name:this.state.Name,delete:this.handleRecipeDelete}))}}]),a}(n.Component),ee=a(69);var te=function(){var e=Object(n.useState)(),t=Object(ee.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){r("1.0.0")})),s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:"cook_book_client_web/blankicon256.png"}),s.a.createElement("p",null,"CookBook ",a),s.a.createElement("a",{className:"App-link",href:"https://github.com/owik100/cook_book_client_web",target:"_blank",rel:"noopener noreferrer"},"GitHub")))},ae=(a(85),a(59),a(86),function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).state={Email:"",Login:"",Password:"",ConfirmPassword:"",InfoMessage:"",InfoMessageIsError:!1,DuringOperation:!1},e.handleChange=e.handleChange.bind(Object(P.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(P.a)(e)),e}return Object(v.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(f.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;this.CanRegister()&&(this.setState({DuringOperation:!0}),x.Register(this.state.Email,this.state.Login,this.state.Password,this.state.ConfirmPassword).then((function(e){console.log("Rejestracja pomy\u015blna! Mo\u017cesz teraz si\u0119 zalogowa\u0107."),t.setState({InfoMessage:"Rejestracja pomy\u015blna! Mo\u017cesz teraz si\u0119 zalogowa\u0107."}),t.setState({InfoMessageIsError:!1}),t.setState({DuringOperation:!1}),t.ClearForm()})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({InfoMessageIsError:!0}),t.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({InfoMessageIsError:!0}),t.setState({InfoMessage:a.message}),t.setState({DuringOperation:!1})}catch(e){console.log(e)}})));e.preventDefault()}},{key:"CanRegister",value:function(){var e=!1;return this.state.Email&&this.state.Login&&this.state.Password&&this.state.ConfirmPassword&&!this.state.DuringOperation&&(this.state.Password===this.state.ConfirmPassword?(e=!0,this.setState({InfoMessageIsError:!1}),this.setState({InfoMessage:""})):(this.setState({InfoMessageIsError:!0}),this.setState({InfoMessage:"Has\u0142a nie s\u0105 takie same"}))),e}},{key:"ClearForm",value:function(){document.getElementById("registerForm").reset(),this.setState({Email:""}),this.setState({Login:""}),this.setState({Password:""}),this.setState({ConfirmPassword:""})}},{key:"RegisterMessage",value:function(){return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(y.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):""!=this.state.InfoMessage&&0==this.state.InfoMessageIsError?s.a.createElement(I.a,{className:"text-center",variant:"success"},this.state.InfoMessage):""!=this.state.InfoMessage&&1==this.state.InfoMessageIsError?s.a.createElement(I.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage):null}},{key:"render",value:function(){return s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col"},s.a.createElement(k.a,{id:"registerForm",onSubmit:this.handleSubmit},s.a.createElement("h1",{className:"display-3 text-center mt-5"},"Rejestracja"),this.RegisterMessage(),s.a.createElement(k.a.Group,{controlId:"formEmail"},s.a.createElement(k.a.Label,null,"Email"),s.a.createElement(k.a.Control,{type:"email",placeholder:"Email",name:"Email",required:!0,onChange:this.handleChange,value:this.state.Email})),s.a.createElement(k.a.Group,{controlId:"formLogin"},s.a.createElement(k.a.Label,null,"Login"),s.a.createElement(k.a.Control,{type:"text",placeholder:"Enter login",name:"Login",required:!0,onChange:this.handleChange,value:this.state.Login})),s.a.createElement(k.a.Group,{controlId:"formPassword"},s.a.createElement(k.a.Label,null,"Has\u0142o"),s.a.createElement(k.a.Control,{type:"password",placeholder:"Password",name:"Password",required:!0,onChange:this.handleChange,value:this.state.Password})),s.a.createElement(k.a.Group,{controlId:"formPasswordRepeat"},s.a.createElement(k.a.Label,null,"Powt\xf3rz has\u0142o"),s.a.createElement(k.a.Control,{type:"password",placeholder:"Password",name:"ConfirmPassword",required:!0,onChange:this.handleChange,value:this.state.ConfirmPassword})),s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(O.a,{variant:"primary",type:"submit"},"Zarejestruj"))))),s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(O.a,{variant:"outline-primary",as:p.b,to:"/Login",className:"mt-3"},"Wr\xf3\u0107")))}}]),a}(n.Component)),ne=a(70),se=a(99),re=a(68),ie=a.n(re),oe=function(e){Object(E.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).handleCheckboxChange=function(e){return n.setState({isPublic:e.target.checked})},n.state={Edit:!1,InfoMessage:"",DuringOperation:!1,CanSubmit:!1,RecipeName:"",Instructions:"",Ingredients:[],IngredientsInput:"",SelectedIngredient:"",isPublic:!1,Image:null,ImagePreview:null,ImageName:"",ID:"",OperationComplete:!1},n.handleChange=n.handleChange.bind(Object(P.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n.onChangeFile=n.onChangeFile.bind(Object(P.a)(n)),n.handleIngredientAdd=n.handleIngredientAdd.bind(Object(P.a)(n)),n.handleRecipeClick=n.handleRecipeClick.bind(Object(P.a)(n)),n.handleIngredientRemove=n.handleIngredientRemove.bind(Object(P.a)(n)),n.DeleteImage=n.DeleteImage.bind(Object(P.a)(n)),n.handleCheckboxChange=n.handleCheckboxChange.bind(Object(P.a)(n)),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;ie.a.init(),this.setState({ImagePreview:"cook_book_client_web/food template.png"});try{0!=this.props.match.params.id&&(this.setState({Edit:!0}),this.setState({RecipeName:this.props.location.recipeProps.Name}),this.setState({Instructions:this.props.location.recipeProps.Instructions}),this.setState({Ingredients:this.props.location.recipeProps.Ingredients}),this.setState({Image:this.props.location.recipeProps.Image}),this.setState({ImagePreview:this.props.location.recipeProps.Image}),this.setState({ImageName:this.props.location.recipeProps.nameOfImage}),this.setState({ID:this.props.location.recipeProps.ID}),this.setState({isPublic:this.props.location.recipeProps.isPublic}))}catch(t){this.setState({DuringOperation:!0}),T.GetRecipeByID(this.props.match.params.id).then((function(t){console.log("Pobrano przepis"),e.setState({RecipeName:t.name}),e.setState({Instructions:t.instruction}),e.setState({Ingredients:t.ingredients}),e.setState({ImageName:t.nameOfImage}),e.setState({ID:t.recipeId}),e.setState({isPublic:t.isPublic}),e.setState({DuringOperation:!1}),e.DonwloadRecipeImage()})).catch((function(t){if("TypeError: response.text is not a function"==t)console.log("Problem z po\u0142\u0105czeniem"),e.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),e.setState({DuringOperation:!1});else try{var a=JSON.parse(t);console.log(a.message),e.setState({InfoMessage:a.message}),e.setState({DuringOperation:!1})}catch(t){console.log(t),e.setState({DuringOperation:!1})}}))}}},{key:"DonwloadRecipeImage",value:function(){var e,t=this;null===this.state.ImageName?this.setState({ImagePreview:"cook_book_client_web/food template.png"}):(this.setState({DuringOperation:!0}),T.DownloadImage(this.state.ImageName).then((function(a){console.log("Pobrano obrazek"),e=URL.createObjectURL(a),t.setState({Image:e}),t.setState({ImagePreview:e}),t.setState({DuringOperation:!1})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({DuringOperation:!1})}catch(e){console.log(e),t.setState({DuringOperation:!1})}})))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(f.a)({},a,n))}},{key:"handleIngredientAdd",value:function(e){var t=this.state,a=t.IngredientsInput,n=t.Ingredients,s=[].concat(Object(ne.a)(n),[a]);this.setState({Ingredients:s,IngredientsInput:""})}},{key:"handleRecipeClick",value:function(e){this.setState({SelectedIngredient:e.target.innerHTML})}},{key:"handleIngredientRemove",value:function(e){var t=this.state,a=t.Ingredients,n=t.SelectedIngredient,s=a.filter((function(e){return e!==n}));this.setState({Ingredients:s,SelectedIngredient:""})}},{key:"onChangeFile",value:function(e){this.setState({InfoMessage:""});var t=e.target.files[0].name,a=t.split(".").pop();if("jpg"===a||"jpeg"===a||"gif"===a||"png"===a){this.setState({Image:e.target.files[0]}),this.setState({ImageName:t});var n=e.target.files[0],s=new FileReader;s.readAsDataURL(n);s.onloadend=function(e){this.setState({ImagePreview:[s.result]})}.bind(this)}else this.setState({InfoMessage:"Wybierz poprawny format pliku!"})}},{key:"handleSubmit",value:function(e){var t=this;this.CanSubmit()&&(this.setState({DuringOperation:!0}),this.setState({InfoMessage:""}),this.state.Edit?T.PutRecipes(this.state.ID,this.state.ID,this.state.RecipeName,this.state.Instructions,this.state.Ingredients,this.state.Image,this.state.ImageName,this.state.isPublic).then((function(e){console.log("Przepis zaktualizowany"),t.setState({DuringOperation:!1}),t.setState({OperationComplete:!0})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({InfoMessage:a.message}),t.setState({DuringOperation:!1})}catch(e){console.log(e),t.setState({DuringOperation:!1})}})):T.InsertRecipe(this.state.RecipeName,this.state.Instructions,this.state.Ingredients,this.state.Image,this.state.isPublic).then((function(e){console.log("Przepis dodany"),t.setState({DuringOperation:!1}),t.setState({OperationComplete:!0})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({InfoMessage:a.message}),t.setState({DuringOperation:!1})}catch(e){console.log(e)}})));e.preventDefault()}},{key:"DeleteImage",value:function(){this.setState({ImageName:""}),this.setState({Image:null}),this.setState({ImagePreview:"cook_book_client_web/food template.png"})}},{key:"CanSubmit",value:function(){var e=!1;return this.state.RecipeName&&this.state.Instructions&&this.state.Ingredients.length>0&&!this.state.DuringOperation&&""==this.state.InfoMessage&&(e=!0),e}},{key:"SubmitMessage",value:function(){return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(y.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):""!=this.state.InfoMessage?s.a.createElement(I.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage):void 0}},{key:"render",value:function(){var e=this;if(!0===this.state.OperationComplete)return s.a.createElement(u.a,{to:"/UserRecipes"});var t=this.state.Ingredients.map((function(t){return s.a.createElement(se.a.Item,{as:"li",active:e.state.SelectedIngredient===t,className:"Clickable",action:!0,onClick:e.handleRecipeClick},t)}));return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center Center"},s.a.createElement(y.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):s.a.createElement(k.a,{id:"registerForm",onSubmit:this.handleSubmit},s.a.createElement($.a,null,s.a.createElement(K.a,null,s.a.createElement(V.a,{md:12},this.SubmitMessage(),s.a.createElement(k.a.Group,{controlId:"formName"},s.a.createElement("h3",{className:"text-center mt-3"},"Nazwa przepisu:"),s.a.createElement(k.a.Control,{type:"text",size:"lg",name:"RecipeName",required:!0,onChange:this.handleChange,value:this.state.RecipeName}))),s.a.createElement(V.a,{md:8},s.a.createElement(k.a.Group,{controlId:"formInstructions"},s.a.createElement("h3",{className:"text-center"},"Przepis:"),s.a.createElement(k.a.Control,{as:"textarea",style:{height:"400px"},size:"lg",type:"text",name:"Instructions",required:!0,onChange:this.handleChange,value:this.state.Instructions})),s.a.createElement(k.a.Group,{controlId:"formIsPublic"},s.a.createElement(k.a.Check,{type:"checkbox",label:"Przepis publiczny",className:"CheckBoxIsRecipePublic",name:"isPublic",onChange:this.handleCheckboxChange,checked:this.state.isPublic}))),s.a.createElement(V.a,{md:4},s.a.createElement(k.a.Group,{controlId:"formIngredients"},s.a.createElement("h3",{className:"text-center"},"Sk\u0142adniki:"),s.a.createElement(k.a.Control,{type:"text",name:"IngredientsInput",onChange:this.handleChange,value:this.state.IngredientsInput})),s.a.createElement("div",{class:"d-flex justify-content-center mb-3"},s.a.createElement(O.a,{disabled:!this.state.IngredientsInput,onClick:this.handleIngredientAdd,className:"mr-3"},"Dodaj"),s.a.createElement(O.a,{disabled:!this.state.SelectedIngredient,onClick:this.handleIngredientRemove},"Usu\u0144")),s.a.createElement(se.a,{id:"IngredientsGroup",as:"ul"},t)),s.a.createElement(V.a,{md:12},s.a.createElement("h3",{className:"text-center"},"Obrazek:")),s.a.createElement(V.a,{md:6},s.a.createElement("div",{class:"custom-file mb-3"},s.a.createElement("input",{id:"formFile",type:"file",class:"custom-file-input",accept:".png, .jpg, .jpeg, .gif",onChange:this.onChangeFile}),s.a.createElement("label",{class:"custom-file-label",for:"inputGroupFile01"},"Wybierz obrazek"))),s.a.createElement(V.a,{md:2},s.a.createElement("div",{class:"custom-file mb-3"},s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(O.a,{variant:"primary",onClick:this.DeleteImage,size:"lg",disabled:!this.state.ImageName},"Usu\u0144 obrazek")))),s.a.createElement(V.a,{md:4},s.a.createElement("img",{className:"smallImg mx-auto d-block mb-3",src:this.state.ImagePreview})),s.a.createElement(V.a,{md:12},s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(O.a,{variant:"primary",type:"submit",size:"lg",disabled:!this.CanSubmit()},this.state.Edit?"Zaaktualizuj przepis":"Dodaj przepis")),s.a.createElement("div",{class:"d-flex justify-content-center mb-3"},s.a.createElement(O.a,{variant:"outline-primary",as:p.b,to:"/UserRecipes",className:"mt-3"},"Wr\xf3\u0107"))))))}}]),a}(n.Component);var ce=function(e){var t=e.component,a=(e.exact,e.strict,e.path,Object(o.a)(e,["component","exact","strict","path"]));return s.a.createElement(u.b,Object.assign({},a,{render:function(e){return g.isAuthenticated()?s.a.createElement(t,e):s.a.createElement(u.a,{to:{pathname:"/Login",state:{from:e.location}}})}}))},le=function(){return s.a.createElement("div",null,s.a.createElement(p.a,null,s.a.createElement(d,null),s.a.createElement(u.d,null,s.a.createElement(u.b,{path:"/Login",component:F}),s.a.createElement(u.b,{path:"/Register",component:ae}),s.a.createElement(u.b,{path:"/About",component:te}),s.a.createElement(ce,{path:"/UserRecipes",component:Q}),s.a.createElement(ce,{path:"/PublicRecipes",component:Q}),s.a.createElement(ce,{path:"/FavouritesRecipes",component:Q}),s.a.createElement(ce,{path:"/RecipePreview/:id",component:Y}),s.a.createElement(ce,{path:"/Edit/:id",component:oe}),"}/>",s.a.createElement(ce,{path:"/",component:Q}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.c28e8ec9.chunk.js.map