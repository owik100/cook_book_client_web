(this.webpackJsonpcook_book_client_web=this.webpackJsonpcook_book_client_web||[]).push([[0],{67:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},72:function(e,t,a){e.exports=a(88)},77:function(e,t,a){},84:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(25),i=a.n(r),o=(a(77),a(71)),c=a(47),l=a(99),u=a(98),p=a(22),m=a(9),h=a(10),g=a.n(h),d={SaveToken:function(e,t){t?g.a.set("JWT",e,{expires:7}):g.a.set("JWT",e)},LoadToken:function(){return g.a.get("JWT")?g.a.get("JWT"):null},LogOut:function(){g.a.remove("JWT"),g.a.remove("userName"),g.a.remove("email"),g.a.remove("id")},isAuthenticated:function(){return!!g.a.get("JWT")},SaveUserData:function(e){g.a.set("userName",e.userName,{expires:7}),g.a.set("email",e.email,{expires:7}),g.a.set("id",e.id,{expires:7}),g.a.set("favouriteRecipes",e.favouriteRecipes,{expires:7})},LoadUserEmail:function(){return g.a.get("email")?g.a.get("email"):null},LoadUserId:function(){return g.a.get("id")?g.a.get("id"):null},LoadUserName:function(){return g.a.get("userName")?g.a.get("userName"):null},LoadUserFavouritesRecipes:function(){return g.a.get("favouriteRecipes")?g.a.get("favouriteRecipes"):null},SaveFavouritesRecipes:function(e){g.a.set("favouriteRecipes",e,{expires:7})}};function f(e){var t=e.onClick;return null!=d.LoadUserName()&&d.isAuthenticated()?s.a.createElement(l.a,{className:"mr-auto",onClick:t},s.a.createElement(l.a.Link,{as:m.b,to:"/Edit/0"},"Dodaj przepis"),s.a.createElement(l.a.Link,{as:m.b,to:"/UserRecipes"},"Moje przepisy"),s.a.createElement(l.a.Link,{as:m.b,to:"/PublicRecipes"},"Odkrywaj przepisy"),s.a.createElement(l.a.Link,{as:m.b,to:"/FavouritesRecipes"},"Ulubione przepisy")):null}var b=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],r=t[1];return s.a.createElement("header",null,s.a.createElement(u.a,{expanded:a,variant:"dark",bg:"primary",sticky:"top",expand:"lg"},s.a.createElement(u.a.Brand,{as:m.b,to:"/UserRecipes"},"  ",s.a.createElement("img",{alt:"logo",src:"/cook_book_client_web/blankicon256.png",width:"30",height:"30",className:"d-inline-block align-top"})," "," Cook Book"),s.a.createElement(u.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){return r(!a&&"expanded")}}),s.a.createElement(u.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(f,{onClick:function(){r(!1)}}),s.a.createElement(l.a,{className:"justify-content-end",onClick:function(){return r(!1)}},s.a.createElement(l.a.Link,{className:"mr-3",as:m.b,to:"/About"},"O aplikacji"),null!=d.LoadUserName()&&d.isAuthenticated()?s.a.createElement(u.a.Text,{className:"AboutUser"},"Witaj ",d.LoadUserName()+"!"):null,function(){var e=Object(p.g)();return d.isAuthenticated()?s.a.createElement(l.a.Link,{onClick:function(){d.LogOut((function(){return e.push("/")}))},as:m.b,to:"/Login"},"Wyloguj"):s.a.createElement(l.a.Link,{as:m.b,to:"/Login"},"Zaloguj si\u0119")}()))))},v=a(26),P=a(19),S=a(20),I=a(7),E=a(21),y=a(23),k=a(91),O=a(92),R=a(97),N=a(93),w=a(94),j=a(5),x=a.n(j),D=a(8),C={GetBearer:function(){return"bearer "+d.LoadToken()}};var z={Register:function(e,t,a,n){return L.apply(this,arguments)},LogIn:function(e,t){return F.apply(this,arguments)},GetUserData:function(){return M.apply(this,arguments)},EditUser:function(e){return T.apply(this,arguments)}},U="https://cookbookapi.azurewebsites.net";function L(){return(L=Object(D.a)(x.a.mark((function e(t,a,n,s){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:t,UserName:a,Password:n,ConfirmPassword:s})},e.next=3,fetch(U+"/api/Account/register",r).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(D.a)(x.a.mark((function e(t,a){var n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("grant_type","password"),n.append("username",t),n.append("password",a),s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n},e.next=7,fetch(U+"/token",s).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(D.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.GetBearer(),a={method:"GET",headers:{"Content-Type":"application/json",Authorization:t}},e.next=4,fetch(U+"/api/User",a).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(D.a)(x.a.mark((function e(t){var a,n,s,r,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C.GetBearer(),n=d.LoadUserId(),s=d.LoadUserName(),r=d.LoadUserEmail(),(i=new FormData).append("Id",n),i.append("UserName",s),i.append("Email",r),i.append("FavouriteRecipes",t),o={method:"PUT",headers:{Authorization:a},body:i},e.next=12,fetch(U+"/api/User/".concat(n),o).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleCheckboxChange=function(e){return n.setState({RememberMe:e.target.checked})},n.state={Login:"",Password:"",RememberMe:!1,InfoMessage:"",DuringOperation:!1,isLogged:!1,LogInfoMessage:"Rejestracja pomy\u015blna. Mo\u017cesz si\u0119 teraz zalogowa\u0107!"},n.handleChange=n.handleChange.bind(Object(I.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.handleCheckboxChange=n.handleCheckboxChange.bind(Object(I.a)(n)),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){d.isAuthenticated()&&this.setState({isLogged:!0})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(v.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;this.setState({DuringOperation:!0}),z.LogIn(this.state.Login,this.state.Password).then((function(e){console.log("Zalogowano"),t.setState({InfoMessage:""}),t.setState({DuringOperation:!1}),d.SaveToken(e.access_Token,t.state.RememberMe),t.GetUserData()})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),t.setState({ShowLogInfo:!1}),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({InfoMessage:a.message}),t.setState({ShowLogInfo:!1}),t.setState({DuringOperation:!1})}catch(e){console.log(e)}})),e.preventDefault()}},{key:"GetUserData",value:function(){var e=this;z.GetUserData().then((function(t){console.log("Pobrano dane u\u017cytkownika"),d.SaveUserData(t),e.setState({isLogged:!0})})).catch((function(t){if("TypeError: response.text is not a function"==t)console.log("Problem z po\u0142\u0105czeniem"),e.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),e.setState({ShowLogInfo:!1}),e.setState({DuringOperation:!1});else try{var a=JSON.parse(t);console.log(a.message),e.setState({InfoMessage:a.message}),e.setState({ShowLogInfo:!1}),e.setState({DuringOperation:!1})}catch(t){console.log(t)}}))}},{key:"LoginMessage",value:function(){return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(k.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):""!=this.state.InfoMessage?s.a.createElement(O.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage):null}},{key:"RegisterSuccess",value:function(){return!0===this.props.location.showInfoLog?s.a.createElement(O.a,{className:"text-center mt-3",variant:"success"},this.state.LogInfoMessage):null}},{key:"render",value:function(){return!0===this.state.isLogged?s.a.createElement(p.a,{to:"/UserRecipes"}):s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col"},s.a.createElement(R.a,{onSubmit:this.handleSubmit},s.a.createElement("h1",{className:"display-3 text-center mt-5"},"Logowanie"),this.LoginMessage(),this.RegisterSuccess(),s.a.createElement(R.a.Group,{controlId:"formLogin"},s.a.createElement(R.a.Label,null,"Login"),s.a.createElement(R.a.Control,{type:"text",required:!0,placeholder:"Enter login",name:"Login",onChange:this.handleChange,value:this.state.Login})),s.a.createElement(R.a.Group,{controlId:"formPassword"},s.a.createElement(R.a.Label,null,"Has\u0142o"),s.a.createElement(R.a.Control,{type:"password",required:!0,placeholder:"Password",name:"Password",onChange:this.handleChange,value:this.state.Password})),s.a.createElement(R.a.Group,{controlId:"formRemember"},s.a.createElement(R.a.Check,{type:"checkbox",label:"Zapami\u0119taj",name:"RememberMe",onChange:this.handleCheckboxChange,checked:this.state.RememberMe})),s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(N.a,{variant:"primary",type:"submit"},"Zaloguj"))))),s.a.createElement("h1",{className:"lead text-center mt-3"},"Nie masz jeszcze konta? Zarejestruj si\u0119!"),s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(N.a,{variant:"outline-primary",as:m.b,to:"/Register"},"Zarejestruj")),s.a.createElement(w.a,null))}}]),a}(n.Component);a(67),a(84);var B=a(54),G={GetAllRecipesLoggedUser:function(e,t){return W.apply(this,arguments)},DownloadImage:function(e){return Z.apply(this,arguments)},DeleteRecipes:function(e){return V.apply(this,arguments)},InsertRecipe:function(e,t,a,n,s){return $.apply(this,arguments)},GetRecipeByID:function(e){return J.apply(this,arguments)},PutRecipes:function(e,t,a,n,s,r,i,o){return K.apply(this,arguments)},GetPublicRecipes:function(e,t){return q.apply(this,arguments)},GetFavouritesRecipes:function(e,t){return H.apply(this,arguments)}},_="https://cookbookapi.azurewebsites.net";function J(){return(J=Object(D.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C.GetBearer(),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a}},e.next=4,fetch(_+"/api/Recipes/".concat(t),n).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(D.a)(x.a.mark((function e(t,a){var n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.GetBearer(),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:n}},e.next=4,fetch(_+"/api/Recipes/CurrentUserRecipes/".concat(t,"/").concat(a),s).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(D.a)(x.a.mark((function e(t,a){var n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.GetBearer(),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:n}},e.next=4,fetch(_+"/api/Recipes/GetPublicRecipes/".concat(t,"/").concat(a),s).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(D.a)(x.a.mark((function e(t,a){var n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.GetBearer(),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:n}},e.next=4,fetch(_+"/api/Recipes/GetFavouritesRecipes/".concat(t,"/").concat(a),s).then((function(e){return e.ok?e.json():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(D.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C.GetBearer(),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:a}},e.next=4,fetch(_+"/api/Recipes/GetPhoto/".concat(t),n).then((function(e){return e.ok?e.blob():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(D.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C.GetBearer(),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:a}},e.next=4,fetch(_+"/api/Recipes/".concat(t),n).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(D.a)(x.a.mark((function e(t,a,n,s,r){var i,o,c,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=C.GetBearer(),o=n.join(";"),(c=new FormData).append("Name",t),c.append("Instruction",a),c.append("Ingredients",o),c.append("Image",s),c.append("isPublic",r),l={method:"POST",headers:{Authorization:i},body:c},e.next=11,fetch(_+"/api/Recipes/",l).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(D.a)(x.a.mark((function e(t,a,n,s,r,i,o,c){var l,u,p,m;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=C.GetBearer(),u=r.join(";"),(p=new FormData).append("Name",n),p.append("Instruction",s),p.append("Ingredients",u),p.append("Image",i),p.append("NameOfImage",o),p.append("RecipeId",a),p.append("isPublic",c),m={method:"PUT",headers:{Authorization:l},body:p},e.next=13,fetch(_+"/api/Recipes/".concat(t),m).then((function(e){return e.ok?e.text():Promise.reject(e)})).catch(function(){var e=Object(D.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text().then((function(e){return e}));case 2:return a=e.sent,e.abrupt("return",Promise.reject(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=a(66),X=a(95),Y=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).state={DuringOperation:!1,UserOrPublicOrFavourites:"User",InfoMessage:"",Recipes:[],CanNext:!1,CanPrevious:!1,PageSize:15,TotalPages:1,PageNumberUserRecipes:1,PageNumberPublicRecipes:1,PageNumberFavouritesRecipes:1,NoUserRecipesInfo:!1,NoFafouritesRecipesInfo:!1},n.PreviousPage=n.PreviousPage.bind(Object(I.a)(n)),n.NextPage=n.NextPage.bind(Object(I.a)(n)),n}return Object(S.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.CheckPath()}},{key:"componentDidMount",value:function(){this.CheckPath()}},{key:"AddDisplayAsPublicProperty",value:function(e){var t=window.location.hash;e.forEach((function(e){e.DisplayAsPublic=!1,!e.isPublic||e.userName!==d.LoadUserName()||"#/PublicRecipes"!==t&&"#/UserRecipes"!==t&&"#/"!==t&&"/"!==t?e.DisplayAsPublic=!1:e.DisplayAsPublic=!0}))}},{key:"AddDisplayAsFavouritesProperty",value:function(e){var t=window.location.hash,a=d.LoadUserFavouritesRecipes();e.forEach((function(e){e.DisplayAsFavourite=!1,"#/PublicRecipes"===t&&a.includes(e.recipeId)?e.DisplayAsFavourite=!0:e.DisplayAsFavourites=!1}))}},{key:"CheckPath",value:function(){try{var e=window.location.hash,t=this.props.location.pageBackUser,a=this.props.location.pageBackPublic,n=this.props.location.pageBackFavourites;if(void 0!=t&&this.setState({PageNumberUserRecipes:t}),void 0!=a&&this.setState({PageNumberPublicRecipes:a}),void 0!=n&&this.setState({PageNumberFavouritesRecipes:n}),"#/PublicRecipes"===e){var s=this.props.location.pageBackPublic;void 0===s&&(s=this.state.PageNumberPublicRecipes),this.setState({PageNumberPublicRecipes:s}),this.setState({UserOrPublicOrFavourites:"Public"}),this.LoadPublicRecipes(this.state.PageSize,s)}else if("#/UserRecipes"===e){var r=this.props.location.pageBackUser;void 0===r&&(r=this.state.PageNumberUserRecipes),this.setState({PageNumberUserRecipes:r}),this.setState({UserOrPublicOrFavourites:"User"}),this.LoadUserRecipes(this.state.PageSize,r)}else if("#/FavouritesRecipes"===e){var i=this.props.location.pageBackFavourites;void 0===i&&(i=this.state.PageNumberFavouritesRecipes),this.setState({PageNumberFavouritesRecipes:i}),this.setState({UserOrPublicOrFavourites:"Favourites"}),this.LoadFavouritesRecipes(this.state.PageSize,i)}else this.setState({UserOrPublicOrFavourites:"User"}),this.LoadUserRecipes(this.state.PageSize,this.state.PageNumberUserRecipes)}catch(o){this.setState({UserOrPublicOrFavourites:"User"}),this.LoadUserRecipes(this.state.PageSize,this.state.PageNumberUserRecipes)}}},{key:"LoadUserRecipes",value:function(e,t){var a=this;this.setState({DuringOperation:!0}),G.GetAllRecipesLoggedUser(e,t).then((function(e){console.log("Pobrano dane u\u017cytkownika"),a.AddDisplayAsPublicProperty(e),a.setState({Recipes:e}),a.setState({DuringOperation:!1}),e.length>0?(a.setState({TotalPages:e[0].totalPages}),a.setState({NoUserRecipesInfo:!1}),a.setState({NoFafouritesRecipesInfo:!1})):(a.setState({TotalPages:1}),a.setState({NoUserRecipesInfo:!0}),a.setState({NoFafouritesRecipesInfo:!1})),a.NavigationButtonsActiveDeactive(t),a.DonwloadRecipeImage()})).catch((function(e){if("TypeError: response.text is not a function"==e)a.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),console.log("Problem z po\u0142\u0105czeniem"),a.setState({DuringOperation:!1});else try{var t=JSON.parse(e);console.log(t.message),a.setState({InfoMessage:t.message}),a.setState({DuringOperation:!1})}catch(e){console.log(e),a.setState({DuringOperation:!1})}}))}},{key:"LoadPublicRecipes",value:function(e,t){var a=this;this.setState({DuringOperation:!0}),this.LoadUserData(),G.GetPublicRecipes(e,t).then((function(e){console.log("Pobrano dane u\u017cytkownika"),a.AddDisplayAsPublicProperty(e),a.AddDisplayAsFavouritesProperty(e),a.setState({Recipes:e}),a.setState({DuringOperation:!1}),e.length>0?(a.setState({TotalPages:e[0].totalPages}),a.setState({NoUserRecipesInfo:!1}),a.setState({NoFafouritesRecipesInfo:!1})):(a.setState({TotalPages:1}),a.setState({NoUserRecipesInfo:!1}),a.setState({NoFafouritesRecipesInfo:!1})),a.NavigationButtonsActiveDeactive(t),a.DonwloadRecipeImage()})).catch((function(e){if("TypeError: response.text is not a function"==e)a.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),console.log("Problem z po\u0142\u0105czeniem"),a.setState({DuringOperation:!1});else try{var t=JSON.parse(e);console.log(t.message),a.setState({InfoMessage:t.message}),a.setState({DuringOperation:!1})}catch(e){console.log(e),a.setState({DuringOperation:!1})}}))}},{key:"LoadFavouritesRecipes",value:function(e,t){var a=this;this.setState({DuringOperation:!0}),G.GetFavouritesRecipes(e,t).then((function(e){console.log("Pobrano dane u\u017cytkownika"),a.setState({Recipes:e}),a.setState({DuringOperation:!1}),e.length>0?(a.setState({TotalPages:e[0].totalPages}),a.setState({NoUserRecipesInfo:!1}),a.setState({NoFafouritesRecipesInfo:!1})):(a.setState({TotalPages:1}),a.setState({NoUserRecipesInfo:!1}),a.setState({NoFafouritesRecipesInfo:!0})),a.NavigationButtonsActiveDeactive(t),a.DonwloadRecipeImage()})).catch((function(e){if("TypeError: response.text is not a function"==e)a.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),console.log("Problem z po\u0142\u0105czeniem"),a.setState({DuringOperation:!1});else try{var t=JSON.parse(e);console.log(t.message),a.setState({InfoMessage:t.message}),a.setState({DuringOperation:!1})}catch(e){console.log(e),a.setState({DuringOperation:!1})}}))}},{key:"LoadUserData",value:function(){var e=this;z.GetUserData().then((function(t){console.log("Pobrano dane u\u017cytkownika"),d.SaveUserData(t),e.setState({isLogged:!0})})).catch((function(t){if("TypeError: response.text is not a function"==t)console.log("Problem z po\u0142\u0105czeniem"),e.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),e.setState({DuringOperation:!1});else try{var a=JSON.parse(t);console.log(a.message),e.setState({InfoMessage:a.message}),e.setState({DuringOperation:!1})}catch(t){console.log(t)}}))}},{key:"DonwloadRecipeImage",value:function(){var e,t=this;this.state.Recipes.forEach((function(a,n){null===a.nameOfImage?(a.image="/cook_book_client_web/food template.png",t.setState({Recipes:t.state.Recipes.map((function(e){return e.recipeId===a.recipeId?Object(B.a)({},e,{item:a}):e}))})):G.DownloadImage(a.nameOfImage).then((function(n){e=URL.createObjectURL(n),a.image=e,t.setState({Recipes:t.state.Recipes.map((function(e){return e.recipeId===a.recipeId?Object(B.a)({},e,{item:a}):e}))}),t.setState({DuringOperation:!1})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({DuringOperation:!1})}catch(e){console.log(e),t.setState({DuringOperation:!1})}}))}))}},{key:"PreviousPage",value:function(){if("User"===this.state.UserOrPublicOrFavourites){var e=this.state.PageNumberUserRecipes;this.setState((function(e){return{PageNumberUserRecipes:e.PageNumberUserRecipes-1}})),this.LoadUserRecipes(this.state.PageSize,e-1)}else if("Public"===this.state.UserOrPublicOrFavourites){var t=this.state.PageNumberPublicRecipes;this.setState((function(e){return{PageNumberPublicRecipes:e.PageNumberPublicRecipes-1}})),this.LoadPublicRecipes(this.state.PageSize,t-1)}else if("Favourites"===this.state.UserOrPublicOrFavourites){var a=this.state.PageNumberFavouritesRecipes;this.setState((function(e){return{PageNumberFavouritesRecipes:e.PageNumberFavouritesRecipes-1}})),this.LoadFavouritesRecipes(this.state.PageSize,a-1)}}},{key:"NextPage",value:function(){if("User"===this.state.UserOrPublicOrFavourites){var e=this.state.PageNumberUserRecipes;this.setState((function(e){return{PageNumberUserRecipes:e.PageNumberUserRecipes+1}})),this.LoadUserRecipes(this.state.PageSize,e+1)}else if("Public"===this.state.UserOrPublicOrFavourites){var t=this.state.PageNumberPublicRecipes;this.setState((function(e){return{PageNumberPublicRecipes:e.PageNumberPublicRecipes+1}})),this.LoadPublicRecipes(this.state.PageSize,t+1)}else if("Favourites"===this.state.UserOrPublicOrFavourites){var a=this.state.PageNumberFavouritesRecipes;this.setState((function(e){return{PageNumberFavouritesRecipes:e.PageNumberFavouritesRecipes+1}})),this.LoadFavouritesRecipes(this.state.PageSize,a+1)}}},{key:"NavigationButtonsActiveDeactive",value:function(e){e<=1?this.setState({CanPrevious:!1}):this.setState({CanPrevious:!0}),e>=this.state.TotalPages?this.setState({CanNext:!1}):this.setState({CanNext:!0})}},{key:"render",value:function(){var e=this;if(this.state.DuringOperation)return s.a.createElement("div",{class:"d-flex justify-content-center Center"},s.a.createElement(k.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading...")));if(""!=this.state.InfoMessage)return s.a.createElement(O.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage);var t=this.state.Recipes.map((function(t){return s.a.createElement(Q.a,{sm:4,md:3,lg:2,xl:2,as:m.b,to:{pathname:"/RecipePreview/".concat(t.recipeId),recipeProps:t,UserOrPublicOrFavouritesProps:e.state.UserOrPublicOrFavourites,pageBackUser:e.state.PageNumberUserRecipes,pageBackPublic:e.state.PageNumberPublicRecipes,pageBackFavourites:e.state.PageNumberFavouritesRecipes},className:t.DisplayAsPublic?"PublicRecipe":t.DisplayAsFavourite?"FavouriteRecipe":"NormalRecipe",key:t.recipeId},s.a.createElement("div",{className:"mt-3 singleRecipe"},s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement("img",{src:t.image,alt:"recipe image"})),s.a.createElement("p",{className:"text-center"}," ",t.name)))}));return s.a.createElement(X.a,{fluid:!0},s.a.createElement(w.a,{className:"justify-content-center"},t,s.a.createElement(Q.a,{md:12},s.a.createElement("div",{className:"d-flex justify-content-center mt-3"},s.a.createElement(N.a,{className:"mr-3 mb-3",variant:"primary",size:"lg",disabled:!this.state.CanPrevious,onClick:this.PreviousPage}," <= "),s.a.createElement("p",{className:"mr-3 "},function(){switch(e.state.UserOrPublicOrFavourites){case"User":return"Strona "+e.state.PageNumberUserRecipes+" z "+e.state.TotalPages;case"Public":return"Strona "+e.state.PageNumberPublicRecipes+" z "+e.state.TotalPages;case"Favourites":return"Strona "+e.state.PageNumberFavouritesRecipes+" z "+e.state.TotalPages;default:return"Strona "+e.state.PageNumberUserRecipes+" z "+e.state.TotalPages}}()),s.a.createElement(N.a,{className:"mb-3",variant:"primary",size:"lg",disabled:!this.state.CanNext,onClick:this.NextPage}," => "))),s.a.createElement("div",{className:"mt-3"},s.a.createElement("p",null,this.state.NoUserRecipesInfo?"Nie masz \u017cadnych przepis\xf3w. Dodaj kilka!":null)),s.a.createElement("div",{className:"mt-3"},s.a.createElement("p",null,this.state.NoFafouritesRecipesInfo?"Nie masz \u017cadnych ulubionych przepis\xf3w. Dodaj jakie\u015b naciskaj\u0105c gwiazdk\u0119!":null))))}}]),a}(n.Component),ee=a(96),te=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).state={Name:"",Instructions:"",Ingredients:[],Image:"",nameOfImage:"",ID:"",isPublic:!1,userName:"",showModal:!1,RecipeDeleted:!1,DuringOperation:!1,InfoMessage:"",LastVisit:"",PageBack:"1",IsFavourite:!1},n.handleModalClose=n.handleModalClose.bind(Object(I.a)(n)),n.handleModalShow=n.handleModalShow.bind(Object(I.a)(n)),n.handleRecipeDelete=n.handleRecipeDelete.bind(Object(I.a)(n)),n.handleFavouriteCLick=n.handleFavouriteCLick.bind(Object(I.a)(n)),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.id);try{this.setState({Name:this.props.location.recipeProps.item.name}),this.setState({Instructions:this.props.location.recipeProps.item.instruction}),this.setState({Ingredients:this.props.location.recipeProps.item.ingredients}),this.setState({Image:this.props.location.recipeProps.item.image}),this.setState({ID:this.props.location.recipeProps.item.recipeId}),this.setState({nameOfImage:this.props.location.recipeProps.item.nameOfImage}),this.setState({isPublic:this.props.location.recipeProps.item.isPublic}),this.setState({userName:this.props.location.recipeProps.item.userName}),this.setState({PageBackUser:this.props.location.pageBackUser}),this.setState({PageBackPublic:this.props.location.pageBackPublic}),this.setState({PageBackFavourites:this.props.location.pageBackFavourites}),d.LoadUserFavouritesRecipes().includes(this.props.location.recipeProps.item.recipeId)&&this.setState({IsFavourite:!0}),"User"===this.props.location.UserOrPublicOrFavouritesProps?this.setState({LastVisit:"/UserRecipes"}):"Public"===this.props.location.UserOrPublicOrFavouritesProps?this.setState({LastVisit:"/PublicRecipes"}):this.setState({LastVisit:"/FavouritesRecipes"})}catch(t){this.setState({DuringOperation:!0}),G.GetRecipeByID(this.props.match.params.id).then((function(t){console.log("Pobrano przepis "),e.setState({Name:t.name}),e.setState({Instructions:t.instruction}),e.setState({Ingredients:t.ingredients}),e.setState({nameOfImage:t.nameOfImage}),e.setState({ID:t.recipeId}),e.setState({isPublic:t.isPublic}),e.setState({userName:t.userName}),e.setState({LastVisit:"/UserRecipes"}),d.LoadUserFavouritesRecipes().includes(t.recipeId)&&e.setState({IsFavourite:!0}),e.setState({DuringOperation:!1}),e.DonwloadRecipeImage()})).catch((function(t){if("TypeError: response.text is not a function"==t)console.log("Problem z po\u0142\u0105czeniem"),e.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),e.setState({DuringOperation:!1});else try{var a=JSON.parse(t);console.log(a.message),e.setState({InfoMessage:a.message}),e.setState({DuringOperation:!1})}catch(t){console.log(t),e.setState({DuringOperation:!1})}}))}}},{key:"DonwloadRecipeImage",value:function(){var e,t=this;null===this.state.nameOfImage?this.setState({Image:"/cook_book_client_web/food template.png"}):(this.setState({DuringOperation:!0}),G.DownloadImage(this.state.nameOfImage).then((function(a){console.log("Pobrano obrazek"),e=URL.createObjectURL(a),t.setState({Image:e}),t.setState({DuringOperation:!1})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({DuringOperation:!1})}catch(e){console.log(e),t.setState({DuringOperation:!1})}})))}},{key:"handleModalShow",value:function(e){this.setState({showModal:!0})}},{key:"handleModalClose",value:function(e){this.setState({showModal:!1})}},{key:"handleFavouriteCLick",value:function(e){var t=this,a=!1,n=d.LoadUserFavouritesRecipes(),s=JSON.parse(n);if(this.state.IsFavourite){a=!0;var r=s.indexOf(this.state.ID);r>-1&&s.splice(r,1)}else a=!1,s.push(this.state.ID);var i=s.join(";");z.EditUser(i).then((function(e){a?(console.log("Usuni\u0119to z ulubionych!"),t.setState({IsFavourite:!1})):(console.log("Dodano do ulubionych!"),t.setState({IsFavourite:!0})),d.SaveFavouritesRecipes(s)})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem");else try{var t=JSON.parse(e);console.log(t.message)}catch(e){console.log(e)}}))}},{key:"ModalDelete",value:function(e){return s.a.createElement(ee.a,Object.assign({},e,{size:"lg",centered:!0}),s.a.createElement(ee.a.Header,{closeButton:!0},s.a.createElement(ee.a.Title,{id:"contained-modal-title-vcenter"},e.name)),s.a.createElement(ee.a.Body,null,s.a.createElement("p",null,"Na pewno chcesz usun\u0105\u0107 ten przepis? Operacji nie mo\u017cna cofn\u0105\u0107!")),s.a.createElement(ee.a.Footer,null,s.a.createElement(N.a,{variant:"danger",onClick:e.delete},"Usu\u0144"),s.a.createElement(N.a,{variant:"dark",onClick:e.onHide},"Cofnij")))}},{key:"handleRecipeDelete",value:function(e){var t=this;G.DeleteRecipes(this.state.ID).then((function(e){console.log("Usuni\u0119to!"),t.setState({RecipeDeleted:!0})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem");else try{var t=JSON.parse(e);console.log(t.message)}catch(e){console.log(e)}}))}},{key:"render",value:function(){if(!0===this.state.RecipeDeleted)return s.a.createElement(p.a,{to:"/Recipes"});var e,t,a,n;this.state.isPublic&&this.state.userName!==d.LoadUserName()?(e=null,t=null,a=s.a.createElement("p",{className:"text-center"},"Autor przepisu: ",this.state.userName),n=s.a.createElement(N.a,{onClick:this.handleFavouriteCLick,size:"lg",variant:"outline-warning",className:"mt-3 mb-3  mx-auto d-block"}," ",s.a.createElement("img",{className:"img-fluid imgStar",src:this.state.IsFavourite?"/cook_book_client_web/starFull.png":"/cook_book_client_web/starEmpty.png",alt:"star image"})," ")):(e=s.a.createElement(N.a,{size:"lg",variant:"outline-dark",className:"mr-3 mt-3 mb-3 mx-auto d-block",as:m.b,to:{pathname:"/Edit/".concat(this.state.ID),recipeProps:this.state}},"Edytuj"),t=s.a.createElement(N.a,{onClick:this.handleModalShow,size:"lg",variant:"outline-danger",className:"mt-3 mb-3  mx-auto d-block"},"Usu\u0144"),a=null,n=null);var r=this.state.Ingredients.map((function(e){return s.a.createElement("li",null,e)}));return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center Center"},s.a.createElement(k.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):""!=this.state.InfoMessage?s.a.createElement(O.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage):s.a.createElement("div",null,s.a.createElement(X.a,null,s.a.createElement(w.a,null,s.a.createElement(Q.a,{md:12},s.a.createElement("h1",{className:"mt-3 mb-3 text-center"},this.state.Name)),s.a.createElement(Q.a,{md:12},s.a.createElement("p",{className:"ml-2 mr-2"},this.state.Instructions)),s.a.createElement(Q.a,{md:4,className:"align-self-center"},s.a.createElement("ul",null,r)),s.a.createElement(Q.a,{md:8},s.a.createElement("img",{className:"img-fluid mx-auto d-block",src:this.state.Image,alt:"recipe image"})),s.a.createElement(Q.a,null,s.a.createElement(N.a,{size:"lg",variant:"outline-dark",className:"mr-3 mt-3 mb-3 mx-auto d-block",as:m.b,to:{pathname:this.state.LastVisit,pageBackUser:this.state.PageBackUser,pageBackPublic:this.state.PageBackPublic,pageBackFavourites:this.state.PageBackFavourites}},"Powr\xf3t")),s.a.createElement(Q.a,{className:"align-self-center"},e,a),s.a.createElement(Q.a,null,t,n))),s.a.createElement(this.ModalDelete,{show:this.state.showModal,onHide:this.handleModalClose,name:this.state.Name,delete:this.handleRecipeDelete}))}}]),a}(n.Component);var ae=function(){var e=Object(n.useState)(),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){r("1.0.1")})),s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:"/cook_book_client_web/blankicon256.png",alt:"logo"}),s.a.createElement("p",null,"CookBook ",a),s.a.createElement("a",{className:"App-link",href:"https://github.com/owik100/cook_book_client_web",target:"_blank",rel:"noopener noreferrer"},"GitHub")))};a(85),a(60),a(86);var ne=Object(p.h)((function(e){var t=e.history;return Object(n.useEffect)((function(){var e=t.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[]),null})),se=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(P.a)(this,a),(e=t.call(this)).state={Email:"",Login:"",Password:"",ConfirmPassword:"",InfoMessage:"",InfoMessageIsError:!1,DuringOperation:!1,OperationSuccess:!1},e.handleChange=e.handleChange.bind(Object(I.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(I.a)(e)),e}return Object(S.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(v.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;this.CanRegister()&&(this.setState({DuringOperation:!0}),z.Register(this.state.Email,this.state.Login,this.state.Password,this.state.ConfirmPassword).then((function(e){console.log("Rejestracja pomy\u015blna! Mo\u017cesz teraz si\u0119 zalogowa\u0107."),t.setState({InfoMessage:"Rejestracja pomy\u015blna! Mo\u017cesz teraz si\u0119 zalogowa\u0107."}),t.setState({InfoMessageIsError:!1}),t.setState({DuringOperation:!1}),t.setState({OperationSuccess:!0}),t.ClearForm()})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({InfoMessageIsError:!0}),t.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({InfoMessageIsError:!0}),t.setState({InfoMessage:a.message}),t.setState({DuringOperation:!1})}catch(e){console.log(e)}})));e.preventDefault()}},{key:"CanRegister",value:function(){var e=!1;return this.state.Email&&this.state.Login&&this.state.Password&&this.state.ConfirmPassword&&!this.state.DuringOperation&&(this.state.Password===this.state.ConfirmPassword?(e=!0,this.setState({InfoMessageIsError:!1}),this.setState({InfoMessage:""})):(this.setState({InfoMessageIsError:!0}),this.setState({InfoMessage:"Has\u0142a nie s\u0105 takie same"}))),e}},{key:"ClearForm",value:function(){document.getElementById("registerForm").reset(),this.setState({Email:""}),this.setState({Login:""}),this.setState({Password:""}),this.setState({ConfirmPassword:""})}},{key:"RegisterMessage",value:function(){return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(k.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):""!=this.state.InfoMessage&&0==this.state.InfoMessageIsError?s.a.createElement(O.a,{className:"text-center",variant:"success"},this.state.InfoMessage):""!=this.state.InfoMessage&&1==this.state.InfoMessageIsError?s.a.createElement(O.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage):null}},{key:"render",value:function(){return!0===this.state.OperationSuccess?s.a.createElement(p.a,Object(v.a)({to:"/Login",as:m.b},"to",{pathname:"/Login",showInfoLog:!0})):s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"row"},s.a.createElement("div",{class:"col"},s.a.createElement(R.a,{id:"registerForm",onSubmit:this.handleSubmit},s.a.createElement("h1",{className:"display-3 text-center mt-5"},"Rejestracja"),this.RegisterMessage(),s.a.createElement(R.a.Group,{controlId:"formEmail"},s.a.createElement(R.a.Label,null,"Email"),s.a.createElement(R.a.Control,{type:"email",placeholder:"Email",name:"Email",required:!0,onChange:this.handleChange,value:this.state.Email})),s.a.createElement(R.a.Group,{controlId:"formLogin"},s.a.createElement(R.a.Label,null,"Login"),s.a.createElement(R.a.Control,{type:"text",placeholder:"Enter login",name:"Login",required:!0,onChange:this.handleChange,value:this.state.Login})),s.a.createElement(R.a.Group,{controlId:"formPassword"},s.a.createElement(R.a.Label,null,"Has\u0142o"),s.a.createElement(R.a.Control,{type:"password",placeholder:"Password",name:"Password",required:!0,onChange:this.handleChange,value:this.state.Password})),s.a.createElement(R.a.Group,{controlId:"formPasswordRepeat"},s.a.createElement(R.a.Label,null,"Powt\xf3rz has\u0142o"),s.a.createElement(R.a.Control,{type:"password",placeholder:"Password",name:"ConfirmPassword",required:!0,onChange:this.handleChange,value:this.state.ConfirmPassword})),s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(N.a,{variant:"primary",type:"submit"},"Zarejestruj"))))),s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(N.a,{variant:"outline-primary",as:m.b,to:"/Login",className:"mt-3"},"Wr\xf3\u0107")))}}]),a}(n.Component),re=a(70),ie=a(100),oe=a(69),ce=a.n(oe),le=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleCheckboxChange=function(e){return n.setState({isPublic:e.target.checked})},n.state={Edit:!1,InfoMessage:"",DuringOperation:!1,CanSubmit:!1,RecipeName:"",Instructions:"",Ingredients:[],IngredientsInput:"",SelectedIngredient:"",isPublic:!1,Image:null,ImagePreview:null,ImageName:"",ID:"",OperationComplete:!1},n.handleChange=n.handleChange.bind(Object(I.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.onChangeFile=n.onChangeFile.bind(Object(I.a)(n)),n.handleIngredientAdd=n.handleIngredientAdd.bind(Object(I.a)(n)),n.handleRecipeClick=n.handleRecipeClick.bind(Object(I.a)(n)),n.handleIngredientRemove=n.handleIngredientRemove.bind(Object(I.a)(n)),n.DeleteImage=n.DeleteImage.bind(Object(I.a)(n)),n.handleCheckboxChange=n.handleCheckboxChange.bind(Object(I.a)(n)),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this;ce.a.init(),this.setState({ImagePreview:"/cook_book_client_web/food template.png"});try{0!=this.props.match.params.id&&(this.setState({Edit:!0}),this.setState({RecipeName:this.props.location.recipeProps.Name}),this.setState({Instructions:this.props.location.recipeProps.Instructions}),this.setState({Ingredients:this.props.location.recipeProps.Ingredients}),this.setState({Image:this.props.location.recipeProps.Image}),this.setState({ImagePreview:this.props.location.recipeProps.Image}),this.setState({ImageName:this.props.location.recipeProps.nameOfImage}),this.setState({ID:this.props.location.recipeProps.ID}),this.setState({isPublic:this.props.location.recipeProps.isPublic}))}catch(t){this.setState({DuringOperation:!0}),G.GetRecipeByID(this.props.match.params.id).then((function(t){console.log("Pobrano przepis"),e.setState({RecipeName:t.name}),e.setState({Instructions:t.instruction}),e.setState({Ingredients:t.ingredients}),e.setState({ImageName:t.nameOfImage}),e.setState({ID:t.recipeId}),e.setState({isPublic:t.isPublic}),e.setState({DuringOperation:!1}),e.DonwloadRecipeImage()})).catch((function(t){if("TypeError: response.text is not a function"==t)console.log("Problem z po\u0142\u0105czeniem"),e.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),e.setState({DuringOperation:!1});else try{var a=JSON.parse(t);console.log(a.message),e.setState({InfoMessage:a.message}),e.setState({DuringOperation:!1})}catch(t){console.log(t),e.setState({DuringOperation:!1})}}))}}},{key:"DonwloadRecipeImage",value:function(){var e,t=this;null===this.state.ImageName?this.setState({ImagePreview:"/cook_book_client_web/food template.png"}):(this.setState({DuringOperation:!0}),G.DownloadImage(this.state.ImageName).then((function(a){console.log("Pobrano obrazek"),e=URL.createObjectURL(a),t.setState({Image:e}),t.setState({ImagePreview:e}),t.setState({DuringOperation:!1})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({DuringOperation:!1})}catch(e){console.log(e),t.setState({DuringOperation:!1})}})))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(v.a)({},a,n))}},{key:"handleIngredientAdd",value:function(e){var t=this.state,a=t.IngredientsInput,n=t.Ingredients,s=[].concat(Object(re.a)(n),[a]);this.setState({Ingredients:s,IngredientsInput:""})}},{key:"handleRecipeClick",value:function(e){this.setState({SelectedIngredient:e.target.innerHTML})}},{key:"handleIngredientRemove",value:function(e){var t=this.state,a=t.Ingredients,n=t.SelectedIngredient,s=a.filter((function(e){return e!==n}));this.setState({Ingredients:s,SelectedIngredient:""})}},{key:"onChangeFile",value:function(e){this.setState({InfoMessage:""});var t=e.target.files[0].name,a=t.split(".").pop();if("jpg"===a||"jpeg"===a||"gif"===a||"png"===a){this.setState({Image:e.target.files[0]}),this.setState({ImageName:t});var n=e.target.files[0],s=new FileReader;s.readAsDataURL(n);s.onloadend=function(e){this.setState({ImagePreview:[s.result]})}.bind(this)}else this.setState({InfoMessage:"Wybierz poprawny format pliku!"})}},{key:"handleSubmit",value:function(e){var t=this;this.CanSubmit()&&(this.setState({DuringOperation:!0}),this.setState({InfoMessage:""}),this.state.Edit?G.PutRecipes(this.state.ID,this.state.ID,this.state.RecipeName,this.state.Instructions,this.state.Ingredients,this.state.Image,this.state.ImageName,this.state.isPublic).then((function(e){console.log("Przepis zaktualizowany"),t.setState({DuringOperation:!1}),t.setState({OperationComplete:!0})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({InfoMessage:a.message}),t.setState({DuringOperation:!1})}catch(e){console.log(e),t.setState({DuringOperation:!1})}})):G.InsertRecipe(this.state.RecipeName,this.state.Instructions,this.state.Ingredients,this.state.Image,this.state.isPublic).then((function(e){console.log("Przepis dodany"),t.setState({DuringOperation:!1}),t.setState({OperationComplete:!0})})).catch((function(e){if("TypeError: response.text is not a function"==e)console.log("Problem z po\u0142\u0105czeniem"),t.setState({InfoMessage:"Problem z po\u0142\u0105czeniem"}),t.setState({DuringOperation:!1});else try{var a=JSON.parse(e);console.log(a.message),t.setState({InfoMessage:a.message}),t.setState({DuringOperation:!1})}catch(e){console.log(e)}})));e.preventDefault()}},{key:"DeleteImage",value:function(){this.setState({ImageName:""}),this.setState({Image:null}),this.setState({ImagePreview:"/cook_book_client_web/food template.png"})}},{key:"CanSubmit",value:function(){var e=!1;return this.state.RecipeName&&this.state.Instructions&&this.state.Ingredients.length>0&&!this.state.DuringOperation&&""==this.state.InfoMessage&&(e=!0),e}},{key:"SubmitMessage",value:function(){return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(k.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):""!=this.state.InfoMessage?s.a.createElement(O.a,{className:"text-center mt-3",variant:"danger"},this.state.InfoMessage):void 0}},{key:"render",value:function(){var e=this;if(!0===this.state.OperationComplete)return s.a.createElement(p.a,{to:"/UserRecipes"});var t=this.state.Ingredients.map((function(t){return s.a.createElement(ie.a.Item,{as:"li",active:e.state.SelectedIngredient===t,className:"Clickable",action:!0,onClick:e.handleRecipeClick},t)}));return this.state.DuringOperation?s.a.createElement("div",{class:"d-flex justify-content-center Center"},s.a.createElement(k.a,{animation:"grow",variant:"primary",role:"status"},s.a.createElement("span",{className:"sr-only my-auto mx-auto"},"Loading..."))):s.a.createElement(R.a,{id:"registerForm",onSubmit:this.handleSubmit},s.a.createElement(X.a,null,s.a.createElement(w.a,null,s.a.createElement(Q.a,{md:12},this.SubmitMessage(),s.a.createElement(R.a.Group,{controlId:"formName"},s.a.createElement("h3",{className:"text-center mt-3"},"Nazwa przepisu:"),s.a.createElement(R.a.Control,{type:"text",size:"lg",name:"RecipeName",required:!0,onChange:this.handleChange,value:this.state.RecipeName}))),s.a.createElement(Q.a,{md:8},s.a.createElement(R.a.Group,{controlId:"formInstructions"},s.a.createElement("h3",{className:"text-center"},"Przepis:"),s.a.createElement(R.a.Control,{as:"textarea",style:{height:"400px"},size:"lg",type:"text",name:"Instructions",required:!0,onChange:this.handleChange,value:this.state.Instructions})),s.a.createElement(R.a.Group,{controlId:"formIsPublic"},s.a.createElement(R.a.Check,{type:"checkbox",label:"Przepis publiczny",className:"CheckBoxIsRecipePublic",name:"isPublic",onChange:this.handleCheckboxChange,checked:this.state.isPublic}))),s.a.createElement(Q.a,{md:4},s.a.createElement(R.a.Group,{controlId:"formIngredients"},s.a.createElement("h3",{className:"text-center"},"Sk\u0142adniki:"),s.a.createElement(R.a.Control,{type:"text",name:"IngredientsInput",onChange:this.handleChange,value:this.state.IngredientsInput})),s.a.createElement("div",{class:"d-flex justify-content-center mb-3"},s.a.createElement(N.a,{disabled:!this.state.IngredientsInput,onClick:this.handleIngredientAdd,className:"mr-3"},"Dodaj"),s.a.createElement(N.a,{disabled:!this.state.SelectedIngredient,onClick:this.handleIngredientRemove},"Usu\u0144")),s.a.createElement(ie.a,{id:"IngredientsGroup",as:"ul"},t)),s.a.createElement(Q.a,{md:12},s.a.createElement("h3",{className:"text-center"},"Obrazek:")),s.a.createElement(Q.a,{md:6},s.a.createElement("div",{class:"custom-file mb-3"},s.a.createElement("input",{id:"formFile",type:"file",class:"custom-file-input",accept:".png, .jpg, .jpeg, .gif",onChange:this.onChangeFile}),s.a.createElement("label",{class:"custom-file-label",for:"inputGroupFile01"},"Wybierz obrazek"))),s.a.createElement(Q.a,{md:2},s.a.createElement("div",{class:"custom-file mb-3"},s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(N.a,{variant:"primary",onClick:this.DeleteImage,size:"lg",disabled:!this.state.ImageName},"Usu\u0144 obrazek")))),s.a.createElement(Q.a,{md:4},s.a.createElement("img",{className:"smallImg mx-auto d-block mb-3",src:this.state.ImagePreview,alt:"recipe image"})),s.a.createElement(Q.a,{md:12},s.a.createElement("div",{class:"d-flex justify-content-center"},s.a.createElement(N.a,{variant:"primary",type:"submit",size:"lg",disabled:!this.CanSubmit()},this.state.Edit?"Zaaktualizuj przepis":"Dodaj przepis")),s.a.createElement("div",{class:"d-flex justify-content-center mb-3"},s.a.createElement(N.a,{variant:"outline-primary",as:m.b,to:"/UserRecipes",className:"mt-3"},"Wr\xf3\u0107"))))))}}]),a}(n.Component);var ue=function(e){var t=e.component,a=(e.exact,e.strict,e.path,Object(o.a)(e,["component","exact","strict","path"]));return s.a.createElement(p.b,Object.assign({},a,{render:function(e){return d.isAuthenticated()?s.a.createElement(t,e):s.a.createElement(p.a,{to:{pathname:"/Login",state:{from:e.location}}})}}))},pe=function(){return s.a.createElement("div",null,s.a.createElement(m.a,null,s.a.createElement(n.Fragment,null,s.a.createElement(ne,null),s.a.createElement(b,null),s.a.createElement(p.d,null,s.a.createElement(p.b,{path:"/Login",component:A}),s.a.createElement(p.b,{path:"/Register",component:se}),s.a.createElement(p.b,{path:"/About",component:ae}),s.a.createElement(ue,{path:"/UserRecipes",component:Y}),s.a.createElement(ue,{path:"/PublicRecipes",component:Y}),s.a.createElement(ue,{path:"/FavouritesRecipes",component:Y}),s.a.createElement(ue,{path:"/RecipePreview/:id",component:te}),s.a.createElement(ue,{path:"/Edit/:id",component:le}),"}/>",s.a.createElement(ue,{path:"/",component:Y})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(87);i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.013bb6bd.chunk.js.map